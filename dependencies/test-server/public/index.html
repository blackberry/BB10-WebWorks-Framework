<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Jasmine Spec Runner</title>

  <link rel="shortcut icon" type="image/png" href="../jasmine/lib/jasmine-core/jasmine_favicon.png">

  <script type="text/javascript" src="webworks.js"></script>

  <link rel="stylesheet" type="text/css" href="../jasmine/lib/jasmine-core/jasmine.css">
  <script type="text/javascript" src="../jasmine/lib/jasmine-core/jasmine.js"></script>
  <script type="text/javascript" src="../jasmine/lib/jasmine-core/jasmine-html.js"></script>

  <!-- include spec files here... -->
  <script type="text/javascript" src="spec/blackberry.js"></script>
  <script type="text/javascript" src="spec/blackberry.app.js"></script>
  
  <script type="text/javascript">
    var jasmineEnv = jasmine.getEnv();
    jasmineEnv.updateInterval = 1000;

    var trivialReporter = new jasmine.TrivialReporter();

    jasmineEnv.addReporter(trivialReporter);

    jasmineEnv.specFilter = function(spec) {
      return trivialReporter.specFilter(spec);
    };

    var currentWindowOnload = window.onload;

    window.onload = function() {
      if (currentWindowOnload) {
        currentWindowOnload();
      }
      //execJasmine();
    };

    function execJasmine() {
      jasmineEnv.execute();
    }

    var loaded = false;

    document.addEventListener('webworksready', function () {
      loaded = true;
      execJasmine();
    });

    setTimeout("forceReload()", 5000);

    function forceReload() {
      if (!loaded) {
        window.location.reload();
      }
      // setTimeout("sendResults()", 3000);
    }

    // function sendResults() {
    //   var send_results = new XMLHttpRequest();
    //   send_results.open("POST", "http://10.137.40.49:3000/results", true);
    //   send_results.send(JSON.stringify(this.document));
    //   console.log(JSON.stringify(this.document));
    // }
  </script>

</head>

<body>
	<input type="button" value="Reload Page" onClick="window.location.reload()">
</body>
</html>
